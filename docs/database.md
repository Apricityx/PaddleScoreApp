# 数据库设计

数据库统一命名采用下划线规则
数据库为以下结构：

## <event_name>.db

> 用于存储比赛数据，比赛事件名字将作为数据库名，例如2024春季比赛.db

### athletes 表 用于存储运动员信息

[//]: # (todo 问题：初赛积分如何计算？)

| 列名   | id      | name    | team    | division | long_distance_score | prone_paddle_score | sprint_score |
|------|---------|---------|---------|----------|---------------------|--------------------|--------------|
| 数据类型 | VARCHAR | VARCHAR | VARCHAR | STRING   | INT                 | INT                | INT          |

---

```SQL
CREATE TABLE athletes (
    id INT PRIMARY KEY,
    name VARCHAR(255),
    team VARCHAR(255),
    division VARCHAR(255),
    long_distance_score INT,
    prone_paddle_score INT,
    sprint_score INT
);
```

> 接下来三张表分别记录三次比赛的成绩，分别为：
>
> 1. 6000米长距离赛（青少年3000米）
>
> 2. 200米趴板划水赛（仅限青少年）
>
> 3. 200米竞速赛

### competitions_long_distance 表

| 列名 | id | name | time |
|----|----|------|------|

SQL:

```sql
CREATE TABLE competitions_long_distance (
    id INT PRIMARY KEY,
    name VARCHAR(255),
    time VARCHAR(255)
);
```

长距离比赛只有一场，所以只有一张表

> 以下为多张表

### <division>_趴板_<schedule> 表

| 列名 | id | name | time | _group |
|----|----|------|------|--------|

### <division>_竞速_<schedule> 表

| 列名 | id | name | time | _group |
|----|----|------|------|--------|

共有以下组别：
flutter:
查询到的division：[U12组男子, U12组女子, U15组男子, U15组女子, U18组男子, U18组女子, U9组男子, U9组女子, 充气板组男子, 充气板组女子, 大师组男子, 大众组男子, 大师组女子, 公开组女子, 大众组女子, 高校甲组男子, 高校甲组女子, 高校乙组男子, 高校乙组女子, 公开组男子, 卡胡纳组男子, 卡胡纳组女子]

例：若人数分配如下：

- U12组男子：45
- U12组女子：38
- U15组男子：60
- U15组女子：54
- U18组男子：70
- U18组女子：22
- U9组男子：30
- U9组女子：29
- 充气板组男子：65
- 充气板组女子：18
- 大师组男子：12
- 大众组男子：50
- 大师组女子：10
- 公开组女子：33
- 大众组女子：48
- 高校甲组男子：41
- 高校甲组女子：37
- 高校乙组男子：25
- 高校乙组女子：27
- 公开组男子：155
- 卡胡纳组男子：21
- 卡胡纳组女子：19

赛程为：

- U12组男子： 初赛 -> 决赛
- U12组女子： 初赛 -> 决赛
- U15组男子： 初赛 -> 决赛
- U15组女子： 初赛 -> 决赛
- U18组男子： 初赛 -> 1/2决赛 -> 决赛
- U18组女子： 初赛 -> 决赛
- U9组男子： 初赛 -> 决赛
- U9组女子： 初赛 -> 决赛
- 充气板组男子： 初赛 -> 1/2决赛 -> 决赛
- 充气板组女子： 初赛 -> 决赛
- 大师组男子： 初赛 -> 决赛
- 大众组男子： 初赛 -> 决赛
- 大师组女子： 初赛 -> 决赛
- 公开组女子： 初赛 -> 决赛
- 大众组女子： 初赛 -> 决赛
- 高校甲组男子： 初赛 -> 决赛
- 高校甲组女子： 初赛 -> 决赛
- 高校乙组男子： 初赛 -> 决赛
- 高校乙组女子： 初赛 -> 决赛
- 公开组男子： 初赛 -> 1/4 决赛 -> 1/2决赛 -> 决赛
- 卡胡纳组男子： 初赛 -> 决赛
- 卡胡纳组女子： 初赛 -> 决赛

那么将有以下表：

---

- U12组男子_趴板_初赛
- U12组男子_趴板_决赛
- U12组女子_趴板_初赛
- U12组女子_趴板_决赛
- U15组男子_趴板_初赛
- U15组男子_趴板_决赛
- U15组女子_趴板_初赛
- ...

---

每一场比赛都对应一个表

## 成绩统计进度

数据库中有一个Progress表，用于记录各个项目的成绩导入进度

1. athlete_imported - 已完成运动员导入
2. long_distance_imported - 已完成长距离赛成绩导入

- <division>_prone_paddle_imported - 已完成某项比赛趴板划水赛成绩导入
- <division>_sprint_imported - 已完成某项比赛竞速赛成绩导入

## 统一翻译规定：

- 比赛（例2024年春季比赛）： event
- 运动员（例张三）： athlete
- 队伍（例北京队）： team
- 分组（例U9男子组）： division
- 赛程（1/4决赛）： schedule
- 项目（例6000米长距离赛）： competitions
- 长距离赛（例6000米长距离赛）： long_distance
- 趴板划水赛（例200米趴板划水赛）： prone_paddle
- 竞速赛（例200米竞速赛）： sprint
- 初赛： preliminary
- 决赛： final
- 分组（根据长距离赛的分组）： _group